class ShoppingListApp{constructor(){this.currentWeek=1;this.weekButtons=document.querySelectorAll('.sub-btn');this.weekContents=document.querySelectorAll('#shopping-list .week-content');this.init()}init(){try{this.setupEventListeners();this.setupKeyboardNavigation();this.setupAccessibility();this.updateWeekDisplay(this.currentWeek)}catch(error){console.error('Error initializing shopping list app:',error);this.showError('Error al inicializar la aplicaciÃ³n')}}setupEventListeners(){this.weekButtons.forEach((button,index)=>{button.addEventListener('click',(e)=>{e.preventDefault();const weekNumber=index+1;this.showWeek(weekNumber)});button.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();const weekNumber=index+1;this.showWeek(weekNumber)}})})}setupKeyboardNavigation(){document.addEventListener('keydown',(e)=>{if(e.target.tagName==='INPUT'||e.target.tagName==='TEXTAREA'){return}if(e.key==='ArrowLeft'||e.key==='ArrowRight'){e.preventDefault();const direction=e.key==='ArrowLeft'?-1:1;const newWeek=Math.max(1,Math.min(5,this.currentWeek+direction));this.showWeek(newWeek);this.focusWeekButton(newWeek)}if(e.key>='1'&&e.key<='5'){e.preventDefault();const weekNumber=parseInt(e.key);this.showWeek(weekNumber);this.focusWeekButton(weekNumber)}})}setupAccessibility(){this.weekButtons.forEach((button,index)=>{button.setAttribute('aria-label',`Ver lista de la semana ${index+1}`);button.setAttribute('role','tab')});this.weekContents.forEach((content,index)=>{content.setAttribute('role','tabpanel');content.setAttribute('aria-labelledby',`week-btn-${index+1}`)})}showWeek(weekNum){try{if(!Number.isInteger(weekNum)||weekNum<1||weekNum>5){throw new Error(`Invalid week number: ${weekNum}`)}this.currentWeek=weekNum;this.updateWeekDisplay(weekNum);this.announceWeekChange(weekNum)}catch(error){console.error('Error showing week:',error);this.showError('Error al cambiar de semana')}}updateWeekDisplay(weekNum){this.weekContents.forEach((content,index)=>{const isActive=index+1===weekNum;content.style.display=isActive?'block':'none';content.setAttribute('aria-hidden',!isActive)});this.weekButtons.forEach((button,index)=>{const isActive=index+1===weekNum;button.classList.toggle('active',isActive);button.setAttribute('aria-selected',isActive)})}focusWeekButton(weekNum){const button=this.weekButtons[weekNum-1];if(button){button.focus()}}announceWeekChange(weekNum){const announcement=`Mostrando lista de la semana ${weekNum}`;this.createAriaLiveRegion(announcement)}createAriaLiveRegion(message){let liveRegion=document.getElementById('aria-live-region');if(!liveRegion){liveRegion=document.createElement('div');liveRegion.id='aria-live-region';liveRegion.setAttribute('aria-live','polite');liveRegion.setAttribute('aria-atomic','true');liveRegion.className='sr-only';document.body.appendChild(liveRegion)}liveRegion.textContent=message}showError(message){console.error(message);alert(message)}getCurrentWeek(){return this.currentWeek}nextWeek(){const nextWeek=Math.min(5,this.currentWeek+1);this.showWeek(nextWeek)}previousWeek(){const prevWeek=Math.max(1,this.currentWeek-1);this.showWeek(prevWeek)}}const Utils={debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}},isInViewport(element){const rect=element.getBoundingClientRect();return(rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth))}};document.addEventListener('DOMContentLoaded',()=>{try{const requiredElements=['.sub-btn','#shopping-list .week-content'];const missingElements=requiredElements.filter(selector=>!document.querySelector(selector));if(missingElements.length>0){throw new Error(`Missing required elements: ${missingElements.join(', ')}`)}window.shoppingListApp=new ShoppingListApp();document.addEventListener('keydown',(e)=>{if(e.altKey&&e.key>='1'&&e.key<='5'){e.preventDefault();const weekNum=parseInt(e.key);window.shoppingListApp.showWeek(weekNum)}});console.log('Shopping List App initialized successfully')}catch(error){console.error('Failed to initialize Shopping List App:',error);document.querySelectorAll('#shopping-list .week-content').forEach(content=>{content.style.display='block'})}});document.addEventListener('visibilitychange',()=>{if(document.hidden){console.log('Page hidden - pausing animations')}else{console.log('Page visible - resuming animations')}});if(typeof module!=='undefined'&&module.exports){module.exports={ShoppingListApp,Utils}}